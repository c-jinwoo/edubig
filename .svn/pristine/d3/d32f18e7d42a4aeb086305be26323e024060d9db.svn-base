<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.webapp.ccedu.mapper.OnlineReviewMapper">
    <select id="selectReviewList" resultType="emap" parameterType="dmap">    
	    SELECT
		    (SELECT MT_SUB_NAME FROM LMS_CD_MT_SUB WHERE MT_CODE='SC' AND ORDR = (SELECT COURSENO FROM LMS_ED_COURSE_SEQ WHERE CSEQNO = A.CSEQNO)) AS CATENM
		    , WRITER
		    , CONTENT
		    , TO_CHAR(WDATE, 'YYYY-MM-DD') AS WDATE
		    , SCORE
		FROM 
		    LMS_ED_REVIEW A
		WHERE       		    
		    USEYN = 'Y' 
		    <if test="cateno != null and cateno != ''">
        	AND CATENO = #{cateno}
       		</if>		    
		ORDER BY
		    WDATE DESC
	</select> 
</mapper>