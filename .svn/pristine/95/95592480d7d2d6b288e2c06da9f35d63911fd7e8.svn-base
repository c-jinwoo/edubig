<%
/* *******************************************
    system  : 나의강의실 > 강의실 홈
    title   : 메인
    summary :	
    wdate   : 2016-09-01
    writer  : SANGS
******************************************* */
%>
<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@ include file="/WEB-INF/jsp/common/inc/taglib_inc.jsp"%>
<%@ include file="/WEB-INF/jsp/academy/cmmn/inc/top_inc.jsp"%>
<%@ include file="/WEB-INF/jsp/academy/cmmn/inc/header_inc.jsp"%>
<c:set var="topMenuCode" value="main"/>
<script  type="text/javascript"> 
var progCodeEnd = "";
var eduseqYn = '${REQUEST_DATA.eduseqYn}';
var aryData1 = new Array;
var aryData2 = new Array;
var aryData3 = new Array;
var aryData4 = new Array;
var aryData5 = new Array;
var aryData6 = new Array;
var aryData7 = new Array;

<c:forEach var="result" items="${onResultList}" varStatus="status">
	aryData1.push('${result.FILE_PATH}');   // 경로
	aryData2.push('${result.MEDIA_FILE}');  // mp4 파일명
	aryData3.push('${result.VAL}');  // mp4 파일명 
	aryData4.push('${result.TREENO}');     // 목차코드
	aryData5.push('${result.STUDYTIME}'); // 학습시간
	aryData6.push('${result.SDAY}'); // 페이지
	aryData7.push('${result.MT_PROG_STATUS_CODE}'); //합격 여부

</c:forEach>

$(document).ready(function(e){
	
	progCodeEnd = '<%=SangsProperties.getProperty("Globals.mtCode_MT_PROG_STATUS_CODE_END")%>';

	var d = new Date();
	var sysdate = d.getFullYear() +'-'+ Number(d.getMonth()+1)+'-'+d.getDate();
    $(".edate").each(function(i, val) { 
    	var edate = new Date($(this).val());
    	if(d > edate) {
    		$(this).parents(".btnAreaC").find("a").attr('class','btn btn-sm btn-gray join');
    		$(this).parents(".btnAreaC").find("a").text('기간종료');
    	}
	});
	
	var checkArr = new Array;
	var histDataArr = new Array;
	var cnt = 0; 
	
	$(".join").each(function(i, val) {
		var check = $(this).attr('check');
		checkArr.push(check);
	});
	
	for(var i = 0 ; i < $("#histDataCheck").val() ; i++) {
		//console.log($("#histData"+i).val());
		histDataArr.push($("#histData"+i).val());
	}
	
	for(var i = 0 ; i < checkArr.length ; i++) {
		//console.log("참여완료최초진입 길이="+checkArr.length);
		for(var j = 0 ; j < histDataArr.length ; j++){
			//console.log("0부터 길이 까지");
			if(checkArr[i] == histDataArr[j]){
				//console.log("일치값 확인");
				$("#"+ histDataArr[j]).attr('class','btn btn-drkblue btn-sm join');
				$("#"+ histDataArr[j]).text('참여완료');
			}
		}
	}

	
});


var arySeqTitle = new Array;
var aryCseqNo = new Array;
var arryMtScCode = new Array;
var arryClassDesk = new Array;
var arryEduseqYn = new Array;

<c:forEach var="result" items="${seqList}" varStatus="status">
	arySeqTitle.push('${result.SEQ_TITLE}');     //타이틀
	aryCseqNo.push('${result.CSEQNO}');  		 // 코드
	arryMtScCode.push('${result.MT_SC_CODE}');   // 과정구분 코드
	arryClassDesk.push('${result.CLASS_DESK}');  // 클래스데스크(학습, 시험, 설문)
	arryEduseqYn.push('${result.EDUSEQ_YN}');    // 순차여부
</c:forEach>

function selectCh(pthis){

	var append = '';
	var arryIdx = 0;
	var idx = 0;

	for(var i = 0; i < arryMtScCode.length ; i++){
		if($(pthis).val() == arryMtScCode[i]){
			if(idx < 0){
				idx++
				arryIdx = i; 
			}
			append += '<option value="'+aryCseqNo[i]+'"> '+arySeqTitle[i]+'</option>';
		}
	}
	$('#cseqno').find('option').remove();
	$('#cseqno').append(append);

}


var studytime = '${progData.STUDYTIME}';

function pad(nVal) {
	var tmp = ""+nVal;
	if (tmp.length < 2) {
		return "0"+tmp;
	} else {
		return tmp;
	}
}

function getToday() {
	var dt = new Date();
	var yyyy = ""+dt.getFullYear();
	var mm = pad(dt.getMonth()+1);
	var dt = pad(dt.getDate());
	
	return yyyy + "-" + mm + "-" + dt;
}

$(document).ready(function(){
	//간이메뉴 클릭시 원 헤더 복원
	//헤더열기	
	$('.menu_toggle').click(function(){
		//$('.menu_toggle').css('display', 'none');
		if($('#pmode').val() == 'E'){
			$('.menu_toggle_close').slideDown(500);
		}
	});
	//헤더 닫기
	$('.menu_toggle_close').click(function(){
		if($('#pmode').val() == 'E'){
			$('.menu_toggle_close').slideUp(500);
		}
		//$('.menu_toggle').css('display', 'block');
	});
	
	// 1일 학습량 초과시 학습제한
	if (studytime && Number(studytime) > 0) {
		var cnt = 0;
		var today = getToday();
		$('.edate').each(function(){
			if (today == $(this).text().split(' ')[0]) {
				cnt++;
			}
		});
		
		if (cnt >= Number(studytime)) {
		
			$('.edate').each(function(){
				if (today != $(this).text().split(' ')[0]) {
					var $obj = $(this).closest('div').find('.study');
					$obj.attr('onclick','');
					$obj.click(function(){alert('1일 학습량은 '+studytime+'차시 입니다.')});
				}
			}); 
			
			//$('.study').attr('onclick','');
			//$('.study').click(function(){alert('1일 학습량은 '+studytime+'차시 입니다.')});
		}
	}

});

function fnPageMove(url){
	$("#frm").attr("action", url);
	$("#frm").submit();
}



function fnApply(pollcseqno,cnt,edate,sdate){
	
	for(var i = 0 ; i < $("#histDataCheck").val() ; i++) {
		if(pollcseqno == $("#histData"+i).val()){
			alert('이미 참여하셨습니다');
			return false;
		}
	}
	
	var d = new Date();
	var day = d.getDate().toString();
	if(day.length < 2){
		day = '0'+day;
	}
	
   	var now = new Date(); 
   	var todayAtMidn = new Date(now.getFullYear(), now.getMonth(), now.getDate());

   	var edate = new Date(edate);
   	var sdate = new Date(sdate);
   	
   	todayAtMidn.setHours(0,0,0,0);
   	edate.setHours(0,0,0,0);
   	sdate.setHours(0,0,0,0);

   	if (todayAtMidn.getTime() > edate.getTime() || todayAtMidn.getTime() < sdate.getTime())
   	{
   		alert('설문 기간이 아닙니다.');
   		return false;
   	}
	var frm = document.frm;
	frm.pollcseqno.value=pollcseqno;
	frm.cnt.value=cnt;
	$("#frm").attr("action", "/classdesk/user/poll/view.do");
	frm.submit();  
}

// 시험

$(function(){
	$("#sum").on("click",function(){
		alert("시험을 보셨습니다");
	});
});

//진도프로세스
function progExec(cuserno, treeno, sday, studytime, totalEduTime){

    $.ajax({
        url : "/academy/myclass/ajaxProgressCheck.do",
        data : { cuserno : cuserno
               , treeno : treeno
               , studytime : studytime 
               , totalEduTime : totalEduTime
               , sday : sday
        	   },
        dataType : "json",
        type : 'post',
        success : function(res) { 		            	
        	location.reload();
        },
        error : function(e) {
            alert("error :" + e.responseText);
        }
    }); 
}


//진도 화면
function fnView(idx){
	//순차일 경우 
	if(eduseqYn == 'Y'){
		if( aryData7[idx-1] != progCodeEnd){
			if( aryData7[idx-1] == ''){
				alert("안됌");
				return false;
			}
		}

	}
	
	$('#filePath').val(aryData1[idx]);
	$('#mediaFile').val(aryData2[idx]);
	$('#val').val(aryData3[idx]);
	
	$('#treeno').val(aryData4[idx]);
	$('#studytime').val(aryData5[idx]);
	$('#sday').val(aryData6[idx]);
	
	window.open("http://localhost:8080/edu_data/contents/1001.html","mediaPop","width=1000,height=650");
}


function fnForms(examNo, cmd, edate, examTime, pupType) {

		$("#examEdate").val(edate);
		$("#examTime").val(examTime);
		$("#pupType").val(pupType); // 출제방식 (순차, 랜덤)

	   var userPercent = parseInt('<c:out value="${examProgData}"/>'); 

	   var onlineEdu = '<c:out value="${REQUEST_DATA.ONLINE_EDU}"/>'; 
	   

	    // 시험 결과보기
		if (cmd == 'review_form') {
			$('#examNo').val(examNo);
			$('form[name=frm]').attr('action','/classdesk/user/exam/' + cmd + '.do').submit();
		} else {
			if (onlineEdu != 'Y') {
				alert('온라인학습을 수료 해주시기 바랍니다.');
				return;
			}

			$('#examNo').val(examNo);
			$('form[name=frm]').attr('action','/classdesk/user/exam/' + cmd + '.do').submit();
		}
	}


</script>
<script type="text/javascript"> 

	function errimg(img){ 
		img.src='/classdesk/images/thumb_noimage.gif';
	}
	
	$(document).ready(function() {

			$('#schOnline').change(function() {
					$('#courseSelect').find('option').each(function() {
					$(this).remove();
					});

					$('#courseSelect').append('<option value="">선택</option>');

					var selectVal = $(this).val();
					if (selectVal != '') {
						var params = $('#frm').serialize();

					$.ajax({
						url : '/classdesk/main/mainSelect.do',
						type : "POST",
						data : params,
						dataType : "json",
						success : function(data) {
							for (var i = 0; i < data.result.length; i++) {
								$('#courseSelect').append("<option value='"+data.result[i].CUSERNO+","+ data.result[i].CSEQNO+","+ data.result[i].COURSENO+","+ data.result[i].CLASS_DESK+","+ data.result[i].SEQ_TITLE+","+data.result[i].MT_CTYPE_NAME + "'" + "</option>"+data.result[i].SEQ_TITLE);
								}
							}	
						});
					}
				})
		
	});
	
	
	function fnForm(bbsNo, cmd, select){
		
		if(select == 1){
			$("#select").val("list1");
		}else {
			$("#select").val("list2");
		}
		
		$('#bbsNo').val(bbsNo);
		$("#searchWord").val($("#searchText").val());
		$('form[name=frm]').attr('action', '<c:out value="${ctx}"/>/classdesk/bbs/' + cmd + '.do').submit();
	}
	
	
	function selectTitle(selectTitle){
		
		var frm = document.frm;
		$('#searchCseqno').val($('#cseqno').val());
		frm.submit();
	}
	
	//파일다운로드
	function filedown(fileId, bbsNo, fileSeq){
		
		
		var frm = document.frm;
		$("#fileId").val(fileId);
		$("#fileSeq").val(fileSeq);
		/* frm.fileId.value = fileId;
		frm.bbsNo.value = bbsNo;
		frm.fileSeq.value = fileSeq; */
		$('#frm').attr('action', '/classdesk/main/fileDown.do').submit(); 
	} 
</script>

<div class="container" id="Subcontent">
    <article class="subArea">
        <div class="subCntWrap">
            <%-- <%@ include file="/WEB-INF/jsp/academy/cmmn/inc/lnb_classdesk.jsp"%> --%>
            <%@ include file="/WEB-INF/jsp/academy/cmmn/inc/lnb_mypage.jsp"%>
            <div class="path">
            	<ul>
                    <li><span class="home text-hide">홈</span></li>
                    <li>내강의실</li>
                	<li class="active">강의실</li>
                </ul>
            </div>
            <div class="subConts" id="sub-content">
            	 	<section class="bgTop_cate05"><!--   카테고리별 이미지 추가  -->
            		<div class="contTop">
            			<h2 class="h2_tit">강의실</h2>
            		</div>           	
	            </section>
            
			 <form name="frm" id="frm" action="/classdesk/main/main.do" method="post">
			 	<input type="hidden" name="cPage" id="cPage" value="<c:out value="${REQUEST_DATA.cPage}"/>"/>
				<input type="hidden" name="pbcateno" id="pbcateno" value="<c:out value="${REQUEST_DATA.pbcateno}"/>"/>
				<input type="hidden" name="bcateno" id="bcateno" value="<c:out value="${REQUEST_DATA.pbcateno}"/>"/>
				<input type="hidden" name="bbsNo" id="bbsNo" value=""/>
				<input type="hidden" name="select" id="select" value=""/> 
				<input type="hidden" name="searchWord" id="searchWord" value=""/>
				<input type="hidden" name="searchCseqno" id="searchCseqno"  value=""/>
				<input type="hidden" name="CLASSDESK" id="CLASSDESK" 	value="${REQUEST_DATA.CLASSDESK }"/>
				<input type="hidden" name="seqTitle" id="seqTitle" value="<c:out value="${REQUEST_DATA.seqTitle}"/>"/>
				<input type="hidden" name="ctypeName" id="ctypeName" value="<c:out value="${REQUEST_DATA.ctypeName}"/>"/>
				<input type="hidden" id="fileId" name="fileId" value=""/>
				<input type="hidden" id="fileSeq" name="fileSeq" value=""/>

				<!-- 미디어 -->
				<input type="hidden" name="filePath" id="filePath" value=""/>
				<input type="hidden" name="mediaFile" id="mediaFile" value=""/>
				<input type="hidden" name="treeno" id="treeno" value=""/>
				<input type="hidden" name="studytime" id="studytime" value=""/>
				<input type="hidden" name="sday" id="sday" value=""/>
				<input type="hidden" name="val" id="val" value=""/>
				

				
				 <!-- 설문 -->
				<input type="hidden" name="pollcseqno" id="pollcseqno" value=""/> 
				<input type="hidden" name="cnt" id="cnt" value=""/>
				<input type="hidden" id="histDataCheck" value="<c:out value="${pollHistData2}"/>"/>
				
				
				<!-- 시험 -->
				<input type="hidden" name="subcmd" id="subcmd" value=""> 
				<input type="hidden" name="examNo" id="examNo" value=""> 
				<input type="hidden" name="examEdate" id="examEdate" value=""> 
				<input type="hidden" name="examTime" id="examTime" value=""> 
				<input type="hidden" name="pupType" id="pupType" value=""> 
				<input type="hidden" name="examType" id="examType" value=""> 
				<input type="hidden" name="seqTitle" id="seqTitle" value="<c:out value="${REQUEST_DATA.seqTitle}"/>" /> 
				<input type="hidden" name="ctypeName" id="ctypeName value="<c:out value="${REQUEST_DATA.ctypeName}"/>" /> 
				<input type="hidden" name="openType" id="openType" value="<c:out value="${examRowData.OPENTYPE}"/>" />
				
				
				<section>
                	<div class="searchWrap">
                        	<fieldset>
                            	<legend class="sr-only">검색 </legend>
                                  <div class="sel2Search">
                                  	<div class="form-inline">
                                    	<label for="schOnline" class="bold po_C9">강의선택</label>
                                    	<div class="form-group classec">
                                    		<select name="mtScGnbCode" id="mtScGnbCode" title="과정구분"  class="form-control" onchange="selectCh(this)">
												<c:forEach var="result" items="${mtScCodeList}" varStatus="status2">
													<option value="<c:out value="${result.MT_SC_CODE}"/>" <c:if test="${REQUEST_DATA.mtScCode == result.MT_SC_CODE}"> selected="selected"</c:if>><c:out value="${result.MT_SC_NAME}"/></option>
												</c:forEach>
							 				</select>
                                        </div>
                                        <div class="form-group classtit">
                                        	<select name="cseqno" id="cseqno" title="과정명"  class="form-control" >
												<c:forEach var="result" items="${seqList}" varStatus="status2">
													<c:if test="${REQUEST_DATA.mtScCode eq result.MT_SC_CODE}">
														<option value="<c:out value="${result.CSEQNO}"/>" <c:if test="${REQUEST_DATA.SES_CSEQNO eq result.CSEQNO}"> selected="selected"</c:if>><c:out value="${result.SEQ_TITLE}"/></option>
													</c:if>
												</c:forEach>
							 				</select>
                                        </div>
                                        <button type="submit" name="button" class="btn btn-sm btn-mint" onclick="selectTitle(this);" title="검색">검색</button>
                                    </div>

                                  </div>
                           </fieldset>
                    </div>
                </section>
                
                
                
                 <section class="tableBox"> 
                 
                 
                 
                	 <c:if test="${rowData.MT_CTYPE_CODE eq 'DAAA00'}"> 
               		 <hr>
                		<h3 class="main_tit">온라인학습</h3>
                	 </c:if>
              
                	<c:if test="${rowData.MT_CTYPE_CODE eq 'DAAA00'}">  
                    <div class="tblWrap">
                    	<table class="dataTbl text-center">
                        	<caption>온라인학습</caption>
                            	<colgroup>
                                	<col style="width:10%">
                                	<col style="width:*">
                                	<col style="width:20%">
                                	<col style="width:20%">
                                    <col style="width:15%">
                                </colgroup>
                                <thead>
                                	<tr>
                                		<th cope="col">No</th>
                                		<th cope="col">차시명</th>
                                		<th cope="col">진도율</th>
                                		<th cope="col">마지막 수강일</th>
                                		<th cope="col"><span class="sr-only">복습/학습 신청</span></th>
                                	</tr>
                                </thead>
                                <tbody>
                                	<c:forEach items="${onResultList}" var="result" varStatus="stat">
                                	<tr>
                                			<td>
                                				${stat.count}차시
                                			</td>
                                			<td>
                                				${result.SUBJECT}
                                			</td>
                                			<td>
                                			 	<c:out value="${result.VAL}" default="0"/>%
                                			</td>
                                			<td>
                                				${result.TEST_EDATE}
                                			</td>
                                			<td>
                                			
                                				<c:choose>
													<%-- <c:when test="${result.FRAMECNT == result.FRAMESEQ}"> --%> 
													<c:when test="${result.MT_PROG_STATUS_CODE eq 'PS0003'}"> 
														<a href="#none" class="btn btn-blue btn-s" onclick="fnView('${stat.index}');" title="<c:out value="${stat.index + 1}" /> 차시 <c:out value="${result.SUBJECT}" /> 복습하기">복습하기</a>
													</c:when>
													<c:otherwise>
														<a href="#none" class="btn btn-orange btn-sm" onclick="fnView('${stat.index}')" title="<c:out value="${stat.index + 1}" /> 차시 <c:out value="${result.SUBJECT}" /> 학습하기">학습하기</a>
													</c:otherwise>
												</c:choose>
                                			</td>
                                    </tr>
                                	</c:forEach>
	                        	</tbody>
	                    	</table>
	                	</div>
	                </section>
               
                
            		<hr/>
            		 <c:if test="${fn:substring(REQUEST_DATA.classDesk,2,3) eq '1' }">
	                 <section class="tableBox">
	                	<h3 class="main_tit">시험</h3>
	                	
	                    <div class="tblWrap">
	                    	<table class="dataTbl text-center">
	                        	<caption>시험</caption>
	                            	<colgroup>
	                                	<col style="width:10%">
	                                	<col style="width:*">
	                                	<col style="width:30%">
	                                	<col style="width:20%">
	                                    <col style="width:15%">
	                                </colgroup>
	                                <thead>
	                                	<tr>
	                                		<th cope="col">No</th>
	                                		<th cope="col">시험명</th>
	                                		<th cope="col">점수</th>
	                                		<th cope="col">제출일</th>
	                                		<th cope="col"><span class="sr-only">시험/결과  보기</span></th>
	                                	</tr>
	                                </thead>
	                                <tbody>
	                                	 <c:forEach items="${examListData}" var="result" varStatus="stat">
	                                	 	<tr>
	                                	 		<td> ${stat.count} </td>
	                                	 		<td>${result.TITLE}</td>
	                                	 		<td>
	                                	 			<c:if test="${result.USER_SUBMITYN eq 'Y' }">
															<fmt:formatNumber value="${result.SCORE}" pattern="0"/>점 / ${result.EVAL}점                                	 			
	                                	 			</c:if>
	                                	 			<c:if test="${result.USER_SUBMITYN ne 'Y' }">
															${result.EVAL} 점	                                	 			
	                                	 			</c:if>
	                                	 		 </td>
	                                	 	 	<td> ${result.SDATE} ~ ${result.EDATE} </td>
	                                	 		
	                                	 		<td>
	                                	 		
	                                	 			<c:choose>
															<c:when test="${result.ENDYN eq 'Y' }">
																<span class="btn btn-sm btn-gray">기간 종료</span>
															</c:when>
															<c:when test="${result.EXAM_TYPE eq 'A' && (not empty result.CUSERNO || not empty result.USER_SUBMITYN)}">
																<!-- 사후시험 > 결과확인 -->
																<a href="#none" onclick="fnForms('<c:out value="${result.EXAMNO}"/>','review_form' , '<c:out value="${result.EDATE}"/>' , '<c:out value="${result.EXAM_TIME}"/>', '<c:out value="${result.PUB_TYPE}"/>'); return false;"  class="btn btn-sm btn-drkblue" title="결과보기 <c:out value="${result.USER_SUBMITYN}"/>">
																	<span class="gray">결과보기</span>
																</a>
															</c:when>
															<c:when
																test="${result.EXAM_TYPE eq 'B' && (not empty result.CUSERNO || not empty result.USER_SUBMITYN)}">
																<a title="응시완료" href="#none" id="sum" class="btn btn-sm btn-drkblue"><span class="gray">응시완료</span></a>
															</c:when>
															<c:when test="${empty result.CUSERNO && empty result.USER_SUBMITYN}">
																<a title="응시하기" href="#none" onclick="fnForms('<c:out value="${result.EXAMNO}"/>','submit_form' , '<c:out value="${result.EDATE}"/>' , '<c:out value="${result.EXAM_TIME}"/>', '<c:out value="${result.PUB_TYPE}"/>', '<c:out value="${result.EXAM_TYPE}"/>'); return false;"
																	class="btn btn-sm btn-blue" title="응시하기 <c:out value="${result.USER_SUBMITYN}"/>">
																	<span class="blue">응시하기 <c:out value="${result.USER_SUBMITYN}" /></span>
																</a>
															</c:when>
														</c:choose>
	                                	 		
	                                	 		</td>
	                                	 	</tr>
	                                	 </c:forEach>
		                        	</tbody>
		                    	</table>
		                	</div>
		                	
		                </section>
		                </c:if>
             		 </c:if>     
             
                <hr/>
                
                <c:forEach items="${pollHistData}" var="dataList" varStatus="stat">
					<input type="hidden" id="histData${stat.index}" value="<c:out value="${dataList.HISTDATA}"/>"/>
				</c:forEach>
                		
              			<c:if test="${fn:substring(REQUEST_DATA.classDesk,3,4) eq '1' }">
              	 		<section class="tableBox">
		                	<h3 class="main_tit">설문</h3>
		
		                    <div class="tblWrap">
		                    	<table class="dataTbl text-center">
		                        	<caption>설문</caption>
		                            	<colgroup>
		                                	<col style="width:10%">
		                                	<col style="width:*">
		                                	<col style="width:30%">
		                                	<col style="width:20%">
		                                </colgroup>
		                                <thead>
		                                	<tr>
		                                		<th cope="col">No</th>
		                                		<th colspan="2" cope="col" align="center">설문명</th>
		                                		<th cope="col"><span class="sr-only">설문참여/결과  보기</span></th>
		                                	</tr>
		                                </thead>
		                                <tbody>
		                                	<c:choose>
											<c:when test="${not empty pollResultList}">
												<c:forEach items="${pollResultList}" var="result" varStatus="status">
												<tr>
													<td>${status.count}</td>
													<td colspan="2" class="text-center">
			                                    		<div class="ellipsis">
			                                    			${result.TITLE}
			                                    		</div>
			                                    	</td>
			                                    	<td class="btnAreaC"> 
			                                    	
			                                    	<input type="hidden" id="edate" class="edate" value="<c:out value="${result.EDATE}"/>">
			                                         <a href="#none" id="<c:out value='${result.POLLCSEQNO}'/>" class="btn btn-blue btn-sm join"  check="<c:out value='${result.POLLCSEQNO}'/>" onclick="fnApply('<c:out value='${result.POLLCSEQNO}'/>','${result.CNT}','<c:out value="${result.EDATE}"/>','<c:out value="${result.SDATE}" />');" title="설문 참여하기">참여하기</a>
			                                     	 <input type="hidden" name="applyDate" id="applyDate" value="<c:out value="${result.APPLY_DATE}"/>"/>
												</tr>
												</c:forEach>
											</c:when>
											</c:choose>
			                        	</tbody>
			                    	</table>
			                	</div>
			                	
			                </section>
			            	</c:if>
			                
              
					<hr>
					<c:if test="${fn:substring(REQUEST_DATA.classDesk,4,5) eq '1' }">
	                <section class="tableBox">
		                	<h3 class="main_tit">공지사항</h3>
			                	<div class="tblWrap">
		                    	<table class="dataTbl text-center">
		                        	<caption>공지사항</caption>
		                            	<colgroup>
		                                	<col style="width:10%">
		                                	<col style="width:*">
		                                	<col style="width:30%">
		                                	<col style="width:20%">
		                                </colgroup>
		                                <thead>
		                                	<tr>
		                                		<th cope="col">No</th>
		                                		<th cope="col">제목</th>
		                                		<th cope="col">작성일</th>
		                                		<th cope="col">조회수</th>
		                                	</tr>
		                                </thead>
		                                <tbody>
		                                	<c:choose>
											<c:when test="${not empty courselistData}">
												<c:forEach items="${courselistData}" var="result" varStatus="status">
		                                		<tr>
				                                        <c:if test="${result.TOPYN eq 'Y'}">
				                                			<td class="text-center po_C2">
															[공지]
															</td>
														</c:if>
														<c:if test="${result.TOPYN eq 'N'}">
															<td>
															${courselistCount-(REQUEST_DATA.cPage-1)*10-status.count+1}
															</td>
														</c:if>
				                                    </td>
			                                		
			                                		
			                                    	<td class="text-left">
			                                    		<div class="ellipsis">
															 <c:if test="${result.TOPYN eq 'Y'}">
					                                    		<a href="#none" class="noti_tit" onclick="fnForm('<c:out value="${result.BBSNO}"/>','view','1'); return false;" title="<c:out value="${result.TITLE}"/>">
																	<c:out value="${result.TITLE}"/>
																	
																<c:if test="${result.DATE_DIFF < 7}"><span class="new" title="새글"></span></c:if>
																</a>
															</c:if>
															 <c:if test="${result.TOPYN eq 'N'}">
					                                    		<a href="#none" class="" onclick="fnForm('<c:out value="${result.BBSNO}"/>','view','1'); return false;" title="<c:out value="${result.TITLE}"/>">
																	<c:out value="${result.TITLE}"/>
																	
																<c:if test="${result.DATE_DIFF < 7}"><span class="new" title="새글"></span></c:if>
																</a>
															</c:if>
			                                    		</div>
			                                    	</td>
			                                      	<td> <c:out value="${result.WDATE}" /> </td>
			                                      	<td> <c:out value="${result.RCNT}"/></span> </td>
				                                </tr>
		                                    	</c:forEach>
		                                    	</c:when>
		                                    	</c:choose>
			                        	</tbody>
			                    	</table>
			                	</div>
			                	
			                	
			                	
			                	
			                </section> 
			                </c:if>
							<hr/>
							<c:if test="${fn:substring(REQUEST_DATA.classDesk,5,6) eq '1' }">
							 <section class="tableBox">
		                	<h3 class="main_tit">자료실</h3>
		
		                    <div class="tblWrap">
		                    	<table class="dataTbl text-center">
		                        	<caption>자료실</caption>
		                            	<colgroup>
		                                	<col style="width:10%">
		                                	<col style="width:*">
		                                	<col style="width:30%">
		                                	<col style="width:20%">
		                                </colgroup>
		                                <thead>
		                                	<tr>
		                                		<th cope="col">No</th>
		                                		<th cope="col">제목</th>
		                                		<th cope="col">작성일</th>
		                                		<th cope="col">조회수</th>
		                                	</tr>
		                                </thead>
		                                <tbody>
		                                	 <c:choose>
											<c:when test="${not empty courselistData2}">
												<c:forEach items="${courselistData2}" var="result" varStatus="status">
		                                		<tr>
				                                        <c:if test="${result.TOPYN eq 'Y'}">
			                                			<td class="text-center po_C2">
															[공지]
														</td>
														</c:if>
														<c:if test="${result.TOPYN eq 'N'}">
														<td>	
															${courselistCount2-(REQUEST_DATA.cPage-1)*10-status.count+1}
					                                    </td>
														</c:if>
			                                		
			                                    	<td class="text-left">
			                                    		<div class="ellipsis">
			                                    		<c:if test="${result.TOPYN eq 'Y'}">
					                                    		<a href="#none" class="noti_tit" onclick="fnForm('<c:out value="${result.BBSNO}"/>','view','2'); return false;" title="<c:out value="${result.TITLE}"/>">
																	<c:out value="${result.TITLE}"/>
																	
																<c:if test="${result.DATE_DIFF < 7}"><span class="new" title="새글"></span></c:if>
																</a>
															</c:if>
															 <c:if test="${result.TOPYN eq 'N'}">
					                                    		<a href="#none" class="" onclick="fnForm('<c:out value="${result.BBSNO}"/>','view','2'); return false;" title="<c:out value="${result.TITLE}"/>">
																	<c:out value="${result.TITLE}"/>
																	
																<c:if test="${result.DATE_DIFF < 7}"><span class="new" title="새글"></span></c:if>
																</a>
															</c:if>
			                                    		</div>
			                                    	</td>
			                                      	<td> <c:out value="${result.WDATE}" /> </td>
			                                      	<td> <c:out value="${result.RCNT}"/></span> </td>
				                                </tr>
		                                    	</c:forEach>
		                                    	</c:when>
		                                    	</c:choose>
			                        	</tbody>
			                    	</table>
			                	</div>
			                	
			                </section> 
			                </c:if>
	                
				</form>
			<form id="popFrm" name="popFrm" method="POST" action="/classdesk/online/progExec.do">
				<input type="hidden" name="cuserno" id="cuserno" value="${REQUEST_DATA.SES_CUSERNO}">	
				<input type="hidden" name="treeno" id="treeno" value="">
				<input type="hidden" name="courseno" id="courseno" value="${REQUEST_DATA.SES_COURSENO}">
				<input type="hidden" name="cseqno" id="cseqno" value="${REQUEST_DATA.SES_CSEQNO}">
				<input type="hidden" name="frameseq" id="frameseq" value="">
				<input type="hidden" name="studytime" id="studytime" value="">
				<input type="hidden" name="val" id="val" value="">
				<input type="hidden" name="sdate" id="sdate" value="">
				<input type="hidden" name="edate" id="edate" value="">
				<input type="hidden" name="studycnt" id="studycnt" value="">
				<input type="hidden" name="movsec" id="movsec" value="">
				<input type="hidden" name="compDate" id="compDate" value="">
				<input type="hidden" name="lastFrameseq" id="lastFrameseq" value="">
				<input type="hidden" name="frameCompStatus" id="frameCompStatus" value="">
				<input type="hidden" name="oldFrameCompStatus" id="oldFrameCompStatus" value="">
				<input type="hidden" name="CLASSDESK" id="CLASSDESK" value="${REQUEST_DATA.CLASSDESK}">
				<input type="hidden" name="progExecYn" id="progExecYn" value="${progExecYn}"/>
				<input type="hidden" name="seqTitle" id="seqTitle" value=""/>
				<input type="hidden" name="isPass" id="isPass" value="">
				
			</form>
	
	
			</div><!-- //sub-contents -->
	

		</div><!-- //sub-contents -->
	</article>
	
	
	
	
</div><!-- //sub-wrap -->
<%@ include file="/WEB-INF/jsp/academy/cmmn/inc/footer_inc.jsp" %>


<script type="text/javascript"> 
	
	var w1 = parseInt(document.body.scrollWidth);
	var h1 = parseInt(document.body.scrollHeight);
	
	var pop = null;
	
	
	function keyCheck() {
	
	    var keycode = event.keyCode;
	    if (keycode == 16) { alert("Shift키는 사용하실 수 없습니다!!"); return false; }
	    if (keycode == 17) { alert("Ctrl키는 사용하실 수 없습니다!!"); return false; }
	    if (keycode == 18) { alert("Alt키는 사용하실 수 없습니다!!"); return false; }
	 }
	
	document.onkeydown = keyCheck;
	
	
	function fnList(){
        location.reload();
	}
</script>

