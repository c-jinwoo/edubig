<%
/****************************************
    subject : 신용상담사
    summary : 신용상담사 : 시험안내
    author  : SANGS
    date    : 2018-06-15
****************************************/
%>
<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@ include file="/WEB-INF/jsp/ccedu/inc/taglib_inc.jsp"%>
<!DOCTYPE html>
<html lang="ko">
<head>
	<title>소양교육 | 합격자 조회</title>
	<%@ include file="/WEB-INF/jsp/ccedu/inc/head_inc.jsp"%>

<script type="text/javascript">


		var aryData1 = new Array;
		var aryData2 = new Array;
		var aryData3 = new Array;
		var aryData4 = new Array;
		var aryData5 = new Array;
		var aryData6 = new Array;
		var aryData7 = new Array;
		var aryData8 = new Array;
			
		var aryIdx = 0;


		<c:forEach var="result" items="${refreTraiList}" varStatus="status">
			aryData1.push('${result.FILE_PATH}');   // 경로
			aryData2.push('${result.MEDIA_FILE}');  // mp4 파일명 
			aryData3.push('${result.CUSERNO}');    // 수강코드
			aryData4.push('${result.TREENO}');     // 목차코드
			aryData5.push('${result.STUDYTIME}');  // 학습시간
			aryData6.push('${result.SDAY}'); 	   // 페이지
			aryData7.push('${result.COURSENO}');   // 페이지
			aryData8.push('${result.CSEQNO}');     // 페이지
		</c:forEach>


	$(document).ready(function(){
		$('.link-txt a').each(function(){
		    var replaced = $(this).text().replace(/&lt;/g, '<').replace(/&gt;/g, '>');
		    $(this).text(replaced);
		});
		
	});
	
	function learning(idx) {
		
		$('#filePath').val(aryData1[idx]);
		$('#mediaFile').val(aryData2[idx]);
		$('#cuserno').val(aryData3[idx]);
		$('#treeno').val(aryData4[idx]);
		$('#studytime').val(aryData5[idx]);
		$('#mediaPath').val(aryData7[idx]);
		$('#sday').val('1');

		var UserAgent = navigator.userAgent;
		var html = "";
		if (UserAgent.match(/iPhone|iPod|Android|Windows CE|BlackBerry|Symbian|Windows Phone|webOS|Opera Mini|Opera Mobi|POLARIS|IEMobile|lgtelecom|nokia|SonyEricsson/i) != null || UserAgent.match(/LG|SAMSUNG|Samsung/) != null)
		{
			html = "1002.html";
		} else {
			html = "1001.html";
		}
		
		window.open("/edudata/contents/"+html,"mediaPop","width=1000,height=650");
		
	}

	function progExec(cuserno, treeno, sday, studytime, totalEduTime){

        $.ajax({
            url : "/academy/myclass/ajaxProgressCheck.do",
            data : { cuserno : cuserno
	               , treeno : treeno
	               , studytime : studytime 
	               , totalEduTime : totalEduTime
	               , sday : sday
	               , addSoyang : 'Y'
	               , courseno : aryData7[aryIdx]
	               , cseqno : aryData8[aryIdx]
            	   },
            dataType : "json",
            type : 'post',
            success : function(res) { 		            	
            	location.reload();
            },
            error : function(e) {
            	fnModalMsg("중복 로그인으로 진도체크가 되지 않았습니다.",function(){
            		$("#frm").attr("action", "/ccedu/common/login.do");
            		frm.submit();  
            	});
            }
        });
    }
	
</script>

</head>

<body>

<!-- skip nav -->
	<%@ include file="/WEB-INF/jsp/ccedu/inc/nav_inc.jsp"%>
<!--// skip nav -->
<form id="frm" name="frm" method="post">
	<input type="hidden" name="filePath" id="filePath" value=""/>
	<input type="hidden" name="mediaFile" id="mediaFile" value=""/>
	<input type="hidden" name="cuserno" id="cuserno" value=""/>
	<input type="hidden" name="treeno" id="treeno" value=""/>
	<input type="hidden" name="studytime" id="studytime" value=""/>
	<input type="hidden" name="sday" id="sday" value="1"/>
	<input type="hidden" name="mediaPath" id="mediaPath" value="">
	
	
	<input type="hidden" name="ccNo" id="ccNo" value="${refreTraiInfo.CC_NO}">
	<input type="hidden" name="ccAppNo" id="ccAppNo" value="${refreTraiInfo.CC_APP_NO}">
	<input type="hidden" name="mtAppType" id="mtAppType" value="${refreTraiInfo.MT_APP_TYPE}">

</form>

<div id="wrap">

	<!-- header -->
	<%@ include file="/WEB-INF/jsp/ccedu/inc/header_inc.jsp"%>
	<!--// header -->

	<!-- container -->
	<div id="container">

		<!-- location -->
		<jsp:include page="/WEB-INF/jsp/ccedu/inc/location/loc_13.jsp">
			<jsp:param name="menuTitle" value="합격자 조회"/>
			<jsp:param name="menuNm" value="소양 교육"/>
		</jsp:include>
		<!--// location -->

		<div class="con_center">

			<!-- lnb -->
			<div id="lnb">
				<jsp:include page="/WEB-INF/jsp/ccedu/inc/lnb/lnb_13.jsp">
					<jsp:param name="dep2" value="01"/>
					<jsp:param name="menuNm" value="소양 교육"/>
					<jsp:param name="menuTitle" value="합격자 조회"/>
				</jsp:include>
			</div>
			<!--// lnb -->

			<!-- content 본문 -->
			<div id="content">
			
				<!-- 기존 START 2018-08-30  -->
<!-- 				<h3 class="cont_titile">소양 교육</h3> -->
				<!-- 기존 END 2018-08-30  -->
				
				<!-- 2018-08-28 김동인 작업 S --> 
				<h3 class="cont_titile type03">소양 교육<span></span></h3>
				<!-- 2018-08-28 김동인 작업 E -->

				<!-- 본문내용 -->
				<div class="cont_body">
					<!-- start -->

					<div class="c_section">
<!-- 						<ul class="c_txtlist"> -->
<!-- 							<li>1. 소양교육</li> -->
<!-- 							<li>2. 소양교육</li> -->
<!-- 							<li>3. 소양교육</li> -->
<!-- 							<li>4. 소양교육</li> -->
<!-- 						</ul> -->

<!-- 						<div class="c_msg_left"> -->
<!-- 							<div class="img_msg_talk"> -->
<!-- 								<p><strong>소양교육 </strong> 소양교육</p> -->
<!-- 							</div> -->
<!-- 						</div> -->

						<div class="table_style_col">
							<table>
								<caption>번호, 과정명, 학습시간, 학습완료일을 확인할수있고 학습하기 버튼을 클릭할수있는 표 입니다.</caption>
								<colgroup>
									<col  />
									<col  />
									<col  />
									<col  />
									<col  />
								</colgroup>
								<thead>
									<tr>
										<th scope="col">No.</th>
										<th scope="col">과정명</th>
										<th scope="col">학습시간</th>
										<th scope="col">학습완료일</th>
										<th scope="col">동영상 수강</th>
									</tr>
								</thead>
								<tbody>
									<c:if test="${not empty refreTraiList}">
		                          		<c:forEach var="result" items="${refreTraiList}" varStatus="status">
		                             		<tr>
			                             		<!--  시험명 -->
			                                  	<td class="align_center">${result.RNUM}</td>
			                             		<!--  시험명 -->
			                                  	<td>${result.SUBJECT}</td>
			                                	<!-- 접수기간 -->
			                                  	<td class="align_center">
			                                  	<c:set var="dataMin" value="${result.RUNTIME/60}" />
			                                  	<c:set var="dataSec" value="${result.RUNTIME%60}" />
			                                  	<fmt:parseNumber var = "min"  value = "${dataMin}" integerOnly = "true"/>
			                                  	<fmt:parseNumber var = "sec"  value = "${dataSec}" integerOnly = "true"/>
													${min}분  ${sec}초
		                                  		</td> 
		                                  		<!-- 선택 -->
		                                  		<td class="align_center">${result.COMP_DATE}</td>
		                                  		<td class="align_center"> 
		                                  			<c:if test="${refreTraiInfo.REFRESH_DIV eq 'Y'}">
		                                  				<button class="btn_blueline" disabled="disabled" >학습하기</button>
		                                  			</c:if>
		                                  			<c:if test="${refreTraiInfo.REFRESH_DIV ne 'Y'}">
		                                  				<button onclick="learning('${status.index}'); return false;" class="btn_blueline" <c:if test="${result.COMP_DATE ne null}"> disabled="disabled" </c:if> >학습하기</button>
		                                  			</c:if>
		                                  		</td>
		                              		</tr>
		                               	</c:forEach> 
		                               	<tr>
	                              			<td colspan="5" class="align_center">
												<b class="txtbule">(유의사항)</b> <b>온라인 학습 도중에 ∥(일시정지) 또는 X(나가기)를 클릭하지 않고, 새창을 열게되면 진도율이 확인(인정)되지 않습니다.<br>
												온라인학습 도중 쉬어가고자하는 경우 반드시 ∥(일시정지), X(나가기)버튼을 이용하시기 바랍니다.</b>
											</td>
                              			</tr>
									</c:if>
								</tbody>
							</table>
						</div>
					</div>

					<!--// end -->
				</div>
				<!--// 본문내용 -->
				
			<!--  -->
			</div>
			<!--// content 본문 -->
		
		
		</div>
	
	</div>
	<!--// container -->

	<!-- foot -->
	<%@ include file="/WEB-INF/jsp/ccedu/inc/footer_inc.jsp"%>
	<!--// foot end -->

</div>

</body>
</html>